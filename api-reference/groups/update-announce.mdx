---
title: "Configurar Modo An√∫ncio"
api: "POST /groups/update-announce"
description: "Controlar permiss√µes de envio de mensagens no grupo"
---

Define quem pode enviar mensagens no grupo, permitindo restringir a comunica√ß√£o apenas para administradores ou liberar para todos os participantes.

## Controle de Mensagens

<AccordionGroup>
  <Accordion title="Modo An√∫ncio Ativado" icon="megaphone">
    Quando apenas administradores podem enviar mensagens.

    **Configura√ß√£o `announce: true`:**
    - Apenas administradores enviam mensagens
    - Membros comuns podem apenas ler
    - Ideal para canais de notifica√ß√£o
    - Reduz spam e conversas paralelas
    - Mant√©m foco em an√∫ncios oficiais
    - Membros continuam vendo todas as mensagens

    Perfeito para comunicados importantes e unilaterais.

  </Accordion>

  <Accordion title="Modo An√∫ncio Desativado" icon="comments">
    Quando todos os participantes podem enviar mensagens.

    **Configura√ß√£o `announce: false`:**
    - Todos os membros podem enviar mensagens
    - Grupo funciona como conversa normal
    - Permite discuss√µes e intera√ß√£o livre
    - Configura√ß√£o padr√£o de grupos
    - Estimula participa√ß√£o e engajamento
    - Adequado para trabalho em equipe

    Ideal para grupos colaborativos e discuss√µes.

  </Accordion>

  <Accordion title="Permiss√µes Necess√°rias" icon="user-shield">
    Requisitos para alterar configura√ß√µes do grupo.

    **Voc√™ precisa ser:**
    - Membro ativo do grupo
    - Administrador do grupo
    - Conectado a uma inst√¢ncia v√°lida

    **Sem permiss√£o:**
    - Membros comuns n√£o podem alterar
    - Retorna erro 403 (Forbidden)
    - Apenas admins gerenciam configura√ß√µes

    Prote√ß√£o de configura√ß√µes cr√≠ticas do grupo.

  </Accordion>

  <Accordion title="Casos de Uso" icon="lightbulb">
    Situa√ß√µes para usar cada modo de comunica√ß√£o.

    **Modo An√∫ncio (`true`):**
    - Canais de not√≠cias da empresa
    - Comunicados oficiais e avisos
    - Grupos de suporte (apenas respostas de equipe)
    - Transmiss√µes de eventos ao vivo
    - Boletins informativos
    - Grupos de regulamenta√ß√£o

    **Modo Livre (`false`):**
    - Equipes de trabalho e projetos
    - Grupos de discuss√£o e brainstorm
    - Comunidades e networking
    - Grupos de estudo colaborativo
    - Times de atendimento
    - Grupos sociais e familiares

  </Accordion>
</AccordionGroup>

### Authorization

<ParamField path="api_key" type="string" required>
  Chave de autentica√ß√£o da sua conex√£o, utilizada no header Authorization como
  **Bearer** Token. <br />
  Voc√™ encontra sua API Key no bot√£o **API** da sua conex√£o no painel ZapClass. <br />
  A chave sempre come√ßa com o prefixo `zc_`. <br />
  Exemplo: `zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP`
</ParamField>

### Body Parameters

<ParamField path="groupjid" type="string" required>
  Identificador √∫nico do grupo (JID). <br />
  Formato: `n√∫mero@g.us` <br />
  Exemplo: `120363339858396166@g.us`
</ParamField>

<ParamField path="announce" type="boolean" required>
  Controla quem pode enviar mensagens. <br />
  `true`: Apenas administradores podem enviar <br />
  `false`: Todos os participantes podem enviar <br />
  Exemplo: `true`
</ParamField>

<Info>
  **Dica:** Use o modo an√∫ncio para manter grupos organizados e focados,
  evitando conversas paralelas em canais de comunica√ß√£o oficial.
</Info>

<RequestExample>

```bash cURL - Ativar modo an√∫ncio
curl -X POST https://zapclass.com.br/api/groups/update-announce \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP" \
  -d '{
    "groupjid": "120363339858396166@g.us",
    "announce": true
  }'
```

```bash cURL - Desativar modo an√∫ncio
curl -X POST https://zapclass.com.br/api/groups/update-announce \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP" \
  -d '{
    "groupjid": "120363339858396166@g.us",
    "announce": false
  }'
```

```javascript JavaScript - Ativar modo an√∫ncio
const response = await fetch(
  "https://zapclass.com.br/api/groups/update-announce",
  {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
    },
    body: JSON.stringify({
      groupjid: "120363339858396166@g.us",
      announce: true,
    }),
  }
);

const data = await response.json();
if (data.success) {
  console.log("Modo an√∫ncio ativado - apenas admins podem enviar mensagens");
}
```

```javascript JavaScript - Alternar modo
async function toggleAnnounceMode(groupJid) {
  // Busca estado atual
  const infoResponse = await fetch("https://zapclass.com.br/api/groups/info", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
    },
    body: JSON.stringify({ groupjid: groupJid }),
  });

  const groupInfo = await infoResponse.json();

  if (!groupInfo.success) {
    throw new Error(groupInfo.message);
  }

  const currentAnnounce = groupInfo.group.announce;
  const newAnnounce = !currentAnnounce;

  console.log(
    `Estado atual: ${currentAnnounce ? "Apenas admins" : "Todos podem enviar"}`
  );
  console.log(
    `Alterando para: ${newAnnounce ? "Apenas admins" : "Todos podem enviar"}`
  );

  // Alterna o modo
  const updateResponse = await fetch(
    "https://zapclass.com.br/api/groups/update-announce",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
      },
      body: JSON.stringify({
        groupjid: groupJid,
        announce: newAnnounce,
      }),
    }
  );

  const result = await updateResponse.json();

  if (result.success) {
    console.log("‚úì Modo alterado com sucesso");
  }

  return result;
}

// Uso
await toggleAnnounceMode("120363339858396166@g.us");
```

```javascript JavaScript - Configurar com notifica√ß√£o
async function setAnnounceWithNotification(
  groupJid,
  announce,
  notifyMembers = false
) {
  const response = await fetch(
    "https://zapclass.com.br/api/groups/update-announce",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
      },
      body: JSON.stringify({ groupjid: groupJid, announce }),
    }
  );

  const data = await response.json();

  if (!data.success) {
    throw new Error(data.message);
  }

  console.log("‚úì Configura√ß√£o atualizada");

  if (notifyMembers) {
    // Envia mensagem no grupo informando a mudan√ßa
    const message = announce
      ? "üîí *Configura√ß√£o Atualizada*\n\nApenas administradores podem enviar mensagens neste grupo a partir de agora."
      : "üîì *Configura√ß√£o Atualizada*\n\nTodos os participantes podem enviar mensagens livremente.";

    await fetch("https://zapclass.com.br/api/send/text", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
      },
      body: JSON.stringify({
        number: groupJid.replace("@g.us", ""),
        message: message,
      }),
    });

    console.log("‚úì Notifica√ß√£o enviada ao grupo");
  }

  return data;
}

// Uso - ativar modo an√∫ncio e notificar
await setAnnounceWithNotification("120363339858396166@g.us", true, true);
```

```javascript JavaScript - Agendar altera√ß√£o tempor√°ria
async function temporaryAnnounceMode(groupJid, durationMinutes) {
  console.log(`Ativando modo an√∫ncio por ${durationMinutes} minutos...`);

  // Ativa modo an√∫ncio
  await fetch("https://zapclass.com.br/api/groups/update-announce", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
    },
    body: JSON.stringify({
      groupjid: groupJid,
      announce: true,
    }),
  });

  console.log("‚úì Modo an√∫ncio ativado");

  // Agenda desativa√ß√£o
  setTimeout(async () => {
    console.log("Desativando modo an√∫ncio...");

    await fetch("https://zapclass.com.br/api/groups/update-announce", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
      },
      body: JSON.stringify({
        groupjid: groupJid,
        announce: false,
      }),
    });

    console.log("‚úì Modo an√∫ncio desativado - todos podem enviar novamente");
  }, durationMinutes * 60 * 1000);
}

// Uso - modo an√∫ncio por 30 minutos (√∫til durante apresenta√ß√µes)
temporaryAnnounceMode("120363339858396166@g.us", 30);
```

```javascript JavaScript - Configurar m√∫ltiplos grupos
async function updateMultipleGroupsAnnounce(groupJids, announce) {
  const results = [];

  for (const groupJid of groupJids) {
    try {
      const response = await fetch(
        "https://zapclass.com.br/api/groups/update-announce",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
          },
          body: JSON.stringify({ groupjid: groupJid, announce }),
        }
      );

      const data = await response.json();

      results.push({
        groupJid,
        success: data.success,
        message: data.message,
      });

      // Aguarda 1 segundo entre opera√ß√µes
      await new Promise((resolve) => setTimeout(resolve, 1000));
    } catch (error) {
      results.push({
        groupJid,
        success: false,
        message: error.message,
      });
    }
  }

  return results;
}

// Uso - ativar modo an√∫ncio em todos os grupos de comunica√ß√£o
const groups = [
  "120363339858396166@g.us",
  "120363339858396167@g.us",
  "120363339858396168@g.us",
];

const results = await updateMultipleGroupsAnnounce(groups, true);

console.log("=== RESULTADOS ===");
results.forEach((result) => {
  const status = result.success ? "‚úì" : "‚úó";
  console.log(`${status} ${result.groupJid}`);
});
```

```php PHP - Ativar modo an√∫ncio
<?php
$ch = curl_init('https://zapclass.com.br/api/groups/update-announce');

$payload = [
    "groupjid" => "120363339858396166@g.us",
    "announce" => true
];

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$data = json_decode($response, true);

if ($data['success']) {
    echo "Modo an√∫ncio ativado - apenas admins podem enviar mensagens\n";
} else {
    echo "Erro: " . $data['message'];
}

curl_close($ch);
?>
```

```php PHP - Alternar modo
<?php
function toggleAnnounceMode($groupJid) {
    // Busca estado atual
    $ch = curl_init('https://zapclass.com.br/api/groups/info');

    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
        'groupjid' => $groupJid
    ]));
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Content-Type: application/json',
        'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
    ]);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $response = curl_exec($ch);
    $groupInfo = json_decode($response, true);
    curl_close($ch);

    if (!$groupInfo['success']) {
        throw new Exception($groupInfo['message']);
    }

    $currentAnnounce = $groupInfo['group']['announce'];
    $newAnnounce = !$currentAnnounce;

    echo "Estado atual: " . ($currentAnnounce ? 'Apenas admins' : 'Todos podem enviar') . "\n";
    echo "Alterando para: " . ($newAnnounce ? 'Apenas admins' : 'Todos podem enviar') . "\n";

    // Alterna o modo
    $ch = curl_init('https://zapclass.com.br/api/groups/update-announce');

    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
        'groupjid' => $groupJid,
        'announce' => $newAnnounce
    ]));
    curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Content-Type: application/json',
        'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
    ]);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $response = curl_exec($ch);
    $result = json_decode($response, true);
    curl_close($ch);

    if ($result['success']) {
        echo "‚úì Modo alterado com sucesso\n";
    } else {
        echo "‚úó Erro: {$result['message']}\n";
    }

    return $result;
}

// Uso
try {
    toggleAnnounceMode("120363339858396166@g.us");
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
?>
```

```php PHP - Configurar m√∫ltiplos grupos
<?php
function updateMultipleGroupsAnnounce($groupJids, $announce) {
    $results = [];

    foreach ($groupJids as $groupJid) {
        $ch = curl_init('https://zapclass.com.br/api/groups/update-announce');

        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
            'groupjid' => $groupJid,
            'announce' => $announce
        ]));
        curl_setopt($ch, CURLOPT_HTTPHEADER, [
            'Content-Type: application/json',
            'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
        ]);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $response = curl_exec($ch);
        $data = json_decode($response, true);
        curl_close($ch);

        $results[] = [
            'groupJid' => $groupJid,
            'success' => $data['success'],
            'message' => $data['message'] ?? null
        ];

        // Aguarda 1 segundo entre opera√ß√µes
        sleep(1);
    }

    return $results;
}

// Uso - ativar modo an√∫ncio em todos os grupos
$groups = [
    "120363339858396166@g.us",
    "120363339858396167@g.us",
    "120363339858396168@g.us"
];

$results = updateMultipleGroupsAnnounce($groups, true);

echo "=== RESULTADOS ===\n\n";
foreach ($results as $result) {
    $status = $result['success'] ? '‚úì' : '‚úó';
    echo "{$status} {$result['groupJid']}\n";
    if (!$result['success']) {
        echo "  Erro: {$result['message']}\n";
    }
}
?>
```

```php PHP - Classe gerenciadora completa
<?php
class GroupAnnounceManager {
    private $token;
    private $baseUrl = 'https://zapclass.com.br/api';

    public function __construct($token) {
        $this->token = $token;
    }

    private function makeRequest($endpoint, $payload) {
        $ch = curl_init($this->baseUrl . $endpoint);

        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
        curl_setopt($ch, CURLOPT_HTTPHEADER, [
            'Content-Type: application/json',
            "Authorization: Bearer {$this->token}"
        ]);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

        $response = curl_exec($ch);
        curl_close($ch);

        return json_decode($response, true);
    }

    public function getGroupInfo($groupJid) {
        return $this->makeRequest('/groups/info', [
            'groupjid' => $groupJid
        ]);
    }

    public function setAnnounce($groupJid, $announce) {
        $data = $this->makeRequest('/groups/update-announce', [
            'groupjid' => $groupJid,
            'announce' => $announce
        ]);

        if (!$data['success']) {
            throw new Exception($data['message']);
        }

        return $data;
    }

    public function enableAnnounce($groupJid) {
        return $this->setAnnounce($groupJid, true);
    }

    public function disableAnnounce($groupJid) {
        return $this->setAnnounce($groupJid, false);
    }

    public function toggleAnnounce($groupJid) {
        $info = $this->getGroupInfo($groupJid);

        if (!$info['success']) {
            throw new Exception($info['message']);
        }

        $currentAnnounce = $info['group']['announce'];
        $newAnnounce = !$currentAnnounce;

        return $this->setAnnounce($groupJid, $newAnnounce);
    }

    public function updateMultiple($groupJids, $announce, $delay = 1) {
        $results = [];

        foreach ($groupJids as $groupJid) {
            try {
                $this->setAnnounce($groupJid, $announce);
                $results[$groupJid] = [
                    'success' => true,
                    'announce' => $announce
                ];
            } catch (Exception $e) {
                $results[$groupJid] = [
                    'success' => false,
                    'error' => $e->getMessage()
                ];
            }

            if ($delay > 0) {
                sleep($delay);
            }
        }

        return $results;
    }

    public function getCurrentState($groupJid) {
        $info = $this->getGroupInfo($groupJid);

        if (!$info['success']) {
            throw new Exception($info['message']);
        }

        return [
            'groupName' => $info['group']['name'],
            'announce' => $info['group']['announce'],
            'description' => $info['group']['announce']
                ? 'Apenas administradores podem enviar mensagens'
                : 'Todos os participantes podem enviar mensagens'
        ];
    }
}

// Uso
$manager = new GroupAnnounceManager('zt_BppKZWtzvj1X2SbJAuOSkA0Z63uDBQ0wkb28NJaloKeOUnHk');

try {
    // Verificar estado atual
    $state = $manager->getCurrentState("120363339858396166@g.us");
    echo "Grupo: {$state['groupName']}\n";
    echo "Estado: {$state['description']}\n\n";

    // Ativar modo an√∫ncio
    $manager->enableAnnounce("120363339858396166@g.us");
    echo "‚úì Modo an√∫ncio ativado\n\n";

    // Alternar modo
    $manager->toggleAnnounce("120363339858396166@g.us");
    echo "‚úì Modo alternado\n\n";

    // Configurar m√∫ltiplos grupos
    $groups = [
        "120363339858396166@g.us",
        "120363339858396167@g.us"
    ];

    $results = $manager->updateMultiple($groups, true);

    echo "=== RESULTADOS ===\n";
    foreach ($results as $groupJid => $result) {
        if ($result['success']) {
            echo "‚úì {$groupJid} - Modo an√∫ncio ativado\n";
        } else {
            echo "‚úó {$groupJid} - {$result['error']}\n";
        }
    }
} catch (Exception $e) {
    echo "Erro: " . $e->getMessage();
}
?>
```

</RequestExample>

<ResponseExample>

```json 200 - Modo an√∫ncio ativado
{
  "success": true,
  "message": "Announce mode enabled successfully",
  "groupJid": "120363339858396166@g.us",
  "announce": true
}
```

```json 200 - Modo an√∫ncio desativado
{
  "success": true,
  "message": "Announce mode disabled successfully",
  "groupJid": "120363339858396166@g.us",
  "announce": false
}
```

```json 400 - Par√¢metro inv√°lido
{
  "success": false,
  "message": "O par√¢metro 'announce' deve ser um booleano (true ou false)"
}
```

```json 401 - Token inv√°lido
{
  "success": false,
  "message": "Token de autentica√ß√£o inv√°lido ou expirado"
}
```

```json 403 - Sem permiss√£o de admin
{
  "success": false,
  "message": "Voc√™ precisa ser administrador do grupo para alterar configura√ß√µes"
}
```

```json 404 - Grupo n√£o encontrado
{
  "success": false,
  "message": "Grupo n√£o encontrado ou voc√™ n√£o √© membro"
}
```

```json 500 - Erro no servidor
{
  "success": false,
  "message": "Erro ao atualizar configura√ß√£o do grupo. Tente novamente"
}
```

</ResponseExample>
