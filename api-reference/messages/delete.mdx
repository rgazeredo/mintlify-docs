---
title: "Apagar Mensagem"
api: "POST /message/delete"
description: "Apagar mensagem para todos os participantes da conversa"
---

Remove mensagens enviadas ou recebidas para todos os participantes, atualizando o banco de dados e disparando eventos de sincronização automática.

## Recursos de Exclusão

<AccordionGroup>
  <Accordion title="Tipos de Exclusão" icon="trash">
    A exclusão funciona em diferentes contextos de mensagens.

    **Onde usar:**
    - Conversas individuais (1:1)
    - Grupos (pequenos e grandes)
    - Listas de transmissão
    - Comunidades

    **Importante:** A mensagem é removida para todos os participantes da conversa.

  </Accordion>

  <Accordion title="Mensagens Suportadas" icon="message">
    É possível apagar diferentes tipos de mensagens.

    **Tipos aceitos:**
    - Mensagens de texto
    - Mensagens de mídia (imagem, vídeo, áudio)
    - Documentos e arquivos
    - Mensagens de localização
    - Contatos compartilhados
    - Mensagens com botões/listas

    Funciona tanto com mensagens enviadas quanto recebidas.

  </Accordion>

  <Accordion title="Formatos de ID" icon="key">
    O endpoint aceita dois formatos de identificação.

    **Formatos suportados:**
    - **ID completo:** Contém ":" (ex: `owner:messageid`) - usado diretamente
    - **ID curto:** Sem ":" (ex: `messageid`) - concatenado automaticamente com owner

    O sistema identifica e processa o formato adequado.

  </Accordion>

  <Accordion title="Sincronização e Eventos" icon="arrows-rotate">
    A exclusão dispara atualizações automáticas no sistema.

    **Comportamento:**
    - Atualiza status no banco para "Deleted"
    - Gera evento webhook "messages_update"
    - Dispara SSE em tempo real
    - Sincroniza com todos os dispositivos conectados

    Permite rastreamento completo da ação de exclusão.

  </Accordion>
</AccordionGroup>

### Authorization

<ParamField path="api_key" type="string" required>
  Chave de autenticação da sua conexão, utilizada no header Authorization como
  Bearer Token. <br />
  Você encontra sua API Key no botão **API** da sua conexão no painel ZapClass. <br />
  A chave sempre começa com o prefixo `zc_`. <br />
  Exemplo: `zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP`
</ParamField>

### Body Parameters

<ParamField path="id" type="string" required>
  ID da mensagem a ser apagada. <br />
  Aceita formato completo (owner:messageid) ou simplificado (messageid). <br />
  Exemplo: `3EB0538DA65A59F6D8A251`
</ParamField>

<Warning>
  **Atenção:** Mensagens apagadas não podem ser recuperadas. A exclusão é
  permanente para todos os participantes da conversa.
</Warning>

<RequestExample>

```bash cURL
curl -X POST https://zapclass.com.br/api/message/delete \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP" \
  -d '{
    "id": "3EB0538DA65A59F6D8A251"
  }'
```

```javascript JavaScript
const response = await fetch("https://zapclass.com.br/api/message/delete", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
  },
  body: JSON.stringify({
    id: "3EB0538DA65A59F6D8A251",
  }),
});

const data = await response.json();
console.log("Mensagem apagada:", data.success);
```

```php PHP
<?php
$ch = curl_init('https://zapclass.com.br/api/message/delete');

$payload = [
    "id" => "3EB0538DA65A59F6D8A251"
];

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$data = json_decode($response, true);

if ($data['success']) {
    echo "Mensagem apagada com sucesso";
} else {
    echo "Erro: " . $data['message'];
}
curl_close($ch);
?>
```

</RequestExample>

<ResponseExample>

```json 200
{
  "success": true,
  "message": "Message deleted successfully",
  "deletedMessage": {
    "id": "3EB0538DA65A59F6D8A251",
    "status": "Deleted",
    "timestamp": 1672531200000
  }
}
```

```json 400
{
  "success": false,
  "message": "ID de mensagem inválido"
}
```

</ResponseExample>
