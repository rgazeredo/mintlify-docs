---
title: "Editar Mensagem"
api: "POST /messages/edit"
description: "Editar o conteúdo de uma mensagem já enviada"
---

Modifica o texto de mensagens enviadas pela sua instância, utilizando a funcionalidade nativa de edição do WhatsApp com sincronização automática.

## Como Funciona a Edição

<AccordionGroup>
  <Accordion title="Processo de Edição" icon="pen-to-square">
    O sistema realiza uma série de validações e operações para garantir a edição correta.

    **Fluxo de execução:**
    1. Busca a mensagem original pelo ID fornecido
    2. Valida se a mensagem pertence à instância
    3. Edita o conteúdo no WhatsApp
    4. Gera novo ID para a versão editada
    5. Atualiza registro no banco de dados
    6. Dispara eventos SSE/Webhook

  </Accordion>

  <Accordion title="Formatos de ID Aceitos" icon="hashtag">
    O endpoint aceita dois formatos diferentes de ID para flexibilidade.

    **Formatos suportados:**
    - **Completo:** `owner:messageid` (ex: `5511999999999:3A123456789`)
    - **Simplificado:** `messageid` (ex: `3A12345678901234567890123456789012`)

    O sistema identifica automaticamente o formato e processa adequadamente.

  </Accordion>

  <Accordion title="Eventos e Notificações" icon="bell">
    A edição dispara eventos automáticos para integração com outros sistemas.

    **Comportamento:**
    - Webhook recebe notificação de mensagem editada
    - SSE transmite evento em tempo real
    - Retorna objeto completo da mensagem atualizada
    - Mantém histórico de edições no banco de dados

  </Accordion>

  <Accordion title="Limitações Importantes" icon="circle-exclamation">
    Algumas restrições se aplicam à edição de mensagens.

    **Restrições:**
    - Apenas mensagens enviadas pela própria instância
    - Mensagem deve existir no banco de dados
    - Prazo de edição limitado pelo WhatsApp (15 minutos)
    - Não é possível editar mensagens de mídia
    - Apenas conteúdo de texto pode ser modificado

  </Accordion>
</AccordionGroup>

### Authorization

<ParamField path="api_key" type="string" required>
  Chave de autenticação da sua conexão, utilizada no header Authorization como
  **Bearer** Token. <br />
  Você encontra sua API Key no botão **API** da sua conexão no painel ZapClass. <br />
  A chave sempre começa com o prefixo `zc_`. <br />
  Exemplo: `zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP`
</ParamField>

### Body Parameters

<ParamField path="id" type="string" required>
  ID único da mensagem que será editada. <br />
  Exemplo: `5511999999999:1AB2C3DEFG4H56I78JKL9M`
</ParamField>

<ParamField path="message" type="string" required>
  Novo conteúdo de texto da mensagem. <br />
  Substitui completamente o texto original. <br />
  Exemplo: `Texto editado da mensagem`
</ParamField>

<Warning>
  **Atenção:** O WhatsApp permite editar mensagens apenas dentro de 15 minutos
  após o envio. Após esse período, a edição será rejeitada.
</Warning>

<RequestExample>

```bash cURL
curl -X POST https://zapclass.com.br/api/messages/edit \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP" \
  -d '{
    "id": "5511999999999:1AB2C3DEFG4H56I78JKL9M",
    "message": "Texto corrigido da mensagem"
  }'
```

```javascript JavaScript
const response = await fetch("https://zapclass.com.br/api/messages/edit", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
  },
  body: JSON.stringify({
    id: "5511999999999:1AB2C3DEFG4H56I78JKL9M",
    message: "Texto corrigido da mensagem",
  }),
});
```

```php PHP
<?php
$ch = curl_init('https://zapclass.com.br/api/messages/edit');

$payload = [
    "id" => "5511999999999:1AB2C3DEFG4H56I78JKL9M",
    "message" => "Texto corrigido da mensagem"
];

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

curl_exec($ch);
curl_close($ch);
?>
```

</RequestExample>

<ResponseExample>

```json 200
{
  "success": true
}
```

```json 400
{
  "success": false,
  "message": "Token de autenticação inválido"
}
```

</ResponseExample>
