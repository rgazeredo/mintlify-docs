---
title: "Buscar Mensagens"
api: "POST /message/find"
description: "Buscar mensagens em um chat com filtros avançados"
---

Realiza buscas de mensagens utilizando múltiplos filtros disponíveis para localizar conversas, rastrear interações ou recuperar mensagens específicas.

## Recursos de Busca

<AccordionGroup>
  <Accordion title="Busca por ID Específico" icon="magnifying-glass">
    Localiza uma mensagem exata através do seu identificador único.

    **Parâmetro:** `id`

    **Uso ideal:** Quando você precisa recuperar uma mensagem específica já conhecida.

  </Accordion>

  <Accordion title="Filtrar por Chat" icon="messages">
    Recupera todas as mensagens de uma conversa específica.

    **Parâmetro:** `chatid` (formato: número@s.whatsapp.net)

    **Uso ideal:** Visualizar histórico completo de uma conversa ou análise de interações com um cliente.

  </Accordion>

  <Accordion title="Rastreamento de Mensagens" icon="chart-line">
    Filtra mensagens por dados de rastreamento personalizados.

    **Parâmetros:** `track_source` e `track_id`

    **Uso ideal:** Identificar mensagens enviadas por integrações específicas (Chatwoot, N8N, Make, etc.) ou campanhas marcadas.

  </Accordion>

  <Accordion title="Controle de Resultados" icon="list-ordered">
    Limita a quantidade de mensagens retornadas.

    **Parâmetro:** `limit`

    **Ordenação:** Resultados sempre ordenados por data (mais recentes primeiro)

    **Uso ideal:** Paginação ou visualização de mensagens recentes.

  </Accordion>
</AccordionGroup>

### Authorization

<ParamField path="api_key" type="string" required>
  Chave de autenticação da sua conexão, utilizada no header Authorization como
  **Bearer** Token. <br />
  Você encontra sua API Key no botão **API** da sua conexão no painel ZapClass. <br />
  A chave sempre começa com o prefixo `zc_`. <br />
  Exemplo: `zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP`
</ParamField>

### Body Parameters

<ParamField path="id" type="string">
  ID específico da mensagem para busca exata. <br />
  Retorna apenas a mensagem com este identificador. <br />
  Exemplo: `user123:r3EB0538`
</ParamField>

<ParamField path="chatid" type="string">
  ID do chat no formato internacional. <br />
  Filtra mensagens de uma conversa específica. <br />
  Formato: número@s.whatsapp.net <br />
  Exemplo: `5511999999999@s.whatsapp.net`
</ParamField>

<ParamField path="track_source" type="string">
  Origem do rastreamento para filtrar mensagens. <br />
  Identifica de qual sistema/integração as mensagens foram enviadas. <br />
  Exemplo: `chatwoot`
</ParamField>

<ParamField path="track_id" type="string">
  ID de rastreamento para filtrar mensagens. <br />
  Identificador personalizado usado no envio da mensagem. <br />
  Exemplo: `msg_123456789`
</ParamField>

<ParamField path="limit" type="integer">
  Número máximo de mensagens a retornar. <br />
  Útil para paginação e controle de resultados. <br />
  Exemplo: `10`
</ParamField>

<Tip>
  **Combine filtros** para buscas mais precisas. Por exemplo, use `chatid` +
  `track_source` para encontrar mensagens de uma integração específica em uma
  conversa.
</Tip>

<RequestExample>

```bash cURL
curl -X POST https://zapclass.com.br/api/message/find \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP" \
  -d '{
    "chatid": "5511999999999@s.whatsapp.net",
    "track_source": "chatwoot",
    "limit": 10
  }'
```

```javascript JavaScript
const response = await fetch("https://zapclass.com.br/api/message/find", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Authorization: "Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP",
  },
  body: JSON.stringify({
    chatid: "5511999999999@s.whatsapp.net",
    track_source: "chatwoot",
    limit: 10,
  }),
});

const data = await response.json();
console.log(`Encontradas ${data.messages.length} mensagens`);
```

```php PHP
<?php
$ch = curl_init('https://zapclass.com.br/api/message/find');

$payload = [
    "chatid" => "5511999999999@s.whatsapp.net",
    "track_source" => "chatwoot",
    "limit" => 10
];

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Content-Type: application/json',
    'Authorization: Bearer zc_6FrX2qjM4bHT9pR6cC0sD8wLkG3nE2tZfV5uN1aP'
]);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
$data = json_decode($response, true);

echo "Total de mensagens: " . count($data['messages']);
curl_close($ch);
?>
```

</RequestExample>

<ResponseExample>

```json 200
{
  "success": true,
  "messages": [
    {
      "id": "user123:r3EB0538",
      "chatid": "5511999999999@s.whatsapp.net",
      "text": "Olá, gostaria de mais informações sobre o produto",
      "timestamp": "2024-10-04T15:30:00Z",
      "fromMe": false,
      "track_source": "chatwoot",
      "track_id": "msg_123456789"
    },
    {
      "id": "user123:r3EB0539",
      "chatid": "5511999999999@s.whatsapp.net",
      "text": "Claro! Posso ajudar com isso",
      "timestamp": "2024-10-04T15:31:00Z",
      "fromMe": true,
      "track_source": "chatwoot",
      "track_id": "msg_123456790"
    }
  ],
  "total": 2
}
```

```json 400
{
  "success": false,
  "message": "Parâmetros de busca inválidos"
}
```

</ResponseExample>
